require('dotenv').config(); const { Pool } = require('pg'); const pool = new Pool({user: process.env.PG_USER, host: process.env.PG_HOST, database: process.env.PG_DATABASE, password: process.env.PG_PASSWORD, port: process.env.PG_PORT}); async function run() { try { console.log('Inserting P-1000 SKU...'); await pool.query('BEGIN'); await pool.query("INSERT INTO skumapping (platform, platform_sku, internal_sku, product_name, confidence, status) VALUES (, , , , , ) ON CONFLICT (platform, platform_sku) DO NOTHING", ['shopify', 'P-1000', null, 'Test Papaya', 0, 'unmapped']); await pool.query('COMMIT'); console.log('Insert completed'); const result = await pool.query('SELECT * FROM skumapping WHERE platform_sku = ', ['P-1000']); console.log('P-1000 lookup result:', result.rows); } catch (e) { console.error(e); await pool.query('ROLLBACK'); } finally { pool.end(); }} run();
